{"ast":null,"code":"function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { isArray, isNil } from '../../../services/predicate';\nimport { keyCodes } from '../../../services';\nimport { EuiPropTypes } from '../../../utils/prop_types';\nimport { EuiPopover } from '../../popover/popover';\nimport { EuiPopoverTitle } from '../../popover/popover_title';\nimport { EuiFieldSearch } from '../../form/field_search/field_search';\nimport { EuiFilterSelectItem, EuiFilterButton } from '../../filter_group';\nimport { EuiLoadingChart } from '../../loading/loading_chart';\nimport { EuiSpacer } from '../../spacer/spacer';\nimport { EuiIcon } from '../../icon/icon';\nimport { Query } from '../query';\nvar FieldValueOptionType = PropTypes.shape({\n  field: PropTypes.string,\n  value: PropTypes.any.isRequired,\n  name: PropTypes.string,\n  view: PropTypes.node\n});\nvar FieldValueOptionsType = PropTypes.oneOfType([PropTypes.func, // (query) => Promise<FieldValueOptionType[]>\nPropTypes.arrayOf(FieldValueOptionType)]);\nexport var FieldValueSelectionFilterConfigType = PropTypes.shape({\n  type: EuiPropTypes.is('field_value_selection').isRequired,\n  field: PropTypes.string,\n  autoClose: PropTypes.boolean,\n  name: PropTypes.string.isRequired,\n  options: FieldValueOptionsType.isRequired,\n  filterWith: PropTypes.oneOfType([PropTypes.func, PropTypes.oneOf(['prefix', 'includes'])]),\n  cache: PropTypes.number,\n  multiSelect: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['and', 'or'])]),\n  loadingMessage: PropTypes.string,\n  noOptionsMessage: PropTypes.string,\n  searchThreshold: PropTypes.number,\n  available: PropTypes.func // () => boolean\n\n});\nvar FieldValueSelectionFilterPropTypes = {\n  index: PropTypes.number.isRequired,\n  config: FieldValueSelectionFilterConfigType.isRequired,\n  query: PropTypes.any.isRequired,\n  onChange: PropTypes.func.isRequired // (value) => void\n\n};\nvar defaults = {\n  config: {\n    multiSelect: true,\n    filterWith: 'prefix',\n    loadingMessage: 'Loading...',\n    noOptionsMessage: 'No options found',\n    searchThreshold: 10\n  }\n};\nexport var FieldValueSelectionFilter =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FieldValueSelectionFilter, _Component);\n\n  function FieldValueSelectionFilter(props) {\n    var _this;\n\n    _classCallCheck(this, FieldValueSelectionFilter);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FieldValueSelectionFilter).call(this, props));\n    var options = props.config.options;\n    var preloadedOptions = isArray(options) ? {\n      all: options,\n      shown: options\n    } : null;\n    _this.selectItems = [];\n    _this.state = {\n      popoverOpen: false,\n      error: null,\n      options: preloadedOptions\n    };\n    return _this;\n  }\n\n  _createClass(FieldValueSelectionFilter, [{\n    key: \"closePopover\",\n    value: function closePopover() {\n      this.setState({\n        popoverOpen: false\n      });\n    }\n  }, {\n    key: \"onButtonClick\",\n    value: function onButtonClick() {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        if (!prevState.popoverOpen) {\n          // loading options updates the state, so we'll do that in the animation frame\n          window.requestAnimationFrame(function () {\n            _this2.loadOptions();\n          });\n        }\n\n        return {\n          options: null,\n          error: null,\n          popoverOpen: !prevState.popoverOpen\n        };\n      });\n    }\n  }, {\n    key: \"loadOptions\",\n    value: function loadOptions() {\n      var _this3 = this;\n\n      var loader = this.resolveOptionsLoader();\n      this.setState({\n        options: null,\n        error: null\n      });\n      loader().then(function (options) {\n        _this3.setState({\n          error: null,\n          options: {\n            all: options,\n            shown: options\n          }\n        });\n      }).catch(function () {\n        _this3.setState({\n          options: null,\n          error: 'Could not load options'\n        });\n      });\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions() {\n      var _this4 = this;\n\n      var q = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.setState(function (prevState) {\n        if (isNil(prevState.options)) {\n          return {};\n        }\n\n        var predicate = _this4.getOptionFilter();\n\n        return {\n          options: _objectSpread({}, prevState.options, {\n            shown: prevState.options.all.filter(function (option, i, options) {\n              var name = _this4.resolveOptionName(option).toLowerCase();\n\n              var query = q.toLowerCase();\n              return predicate(name, query, options);\n            })\n          })\n        };\n      });\n    }\n  }, {\n    key: \"getOptionFilter\",\n    value: function getOptionFilter() {\n      var filterWith = this.props.config.filterWith || defaults.config.filterWith;\n\n      if (typeof filterWith === 'function') {\n        return filterWith;\n      }\n\n      if (filterWith === 'includes') {\n        return function (name, query) {\n          return name.includes(query);\n        };\n      }\n\n      return function (name, query) {\n        return name.startsWith(query);\n      };\n    }\n  }, {\n    key: \"resolveOptionsLoader\",\n    value: function resolveOptionsLoader() {\n      var _this5 = this;\n\n      var options = this.props.config.options;\n\n      if (isArray(options)) {\n        return function () {\n          return Promise.resolve(options);\n        };\n      }\n\n      if (isNil(this.props.config.cache) || this.props.config.cache <= 0) {\n        return options;\n      }\n\n      return function () {\n        var cachedOptions = _this5.state.cachedOptions;\n\n        if (cachedOptions) {\n          return Promise.resolve(cachedOptions);\n        }\n\n        if (_this5.props.config.cache > 0) {\n          return new Promise(function (resolve, reject) {\n            return options().then(function (opts) {\n              _this5.setState({\n                cachedOptions: opts\n              });\n\n              _this5.timeoutId = setTimeout(function () {\n                _this5.setState({\n                  cachedOptions: null\n                });\n              }, _this5.props.config.cache);\n              resolve(opts);\n            }).catch(function (error) {\n              reject(error);\n            });\n          });\n        }\n      };\n    }\n  }, {\n    key: \"resolveOptionName\",\n    value: function resolveOptionName(option) {\n      return option.name || option.value.toString();\n    }\n  }, {\n    key: \"onOptionClick\",\n    value: function onOptionClick(field, value, checked) {\n      var multiSelect = this.resolveMultiSelect();\n      var autoClose = this.props.autoClose; // we're closing popover only if the user can only select one item... if the\n      // user can select more, we'll leave it open so she can continue selecting\n\n      if (!multiSelect && autoClose) {\n        this.closePopover();\n        var query = checked ? this.props.query.removeSimpleFieldClauses(field) : this.props.query.removeSimpleFieldClauses(field).addSimpleFieldValue(field, value);\n        this.props.onChange(query);\n      } else {\n        if (multiSelect === 'or') {\n          var _query = checked ? this.props.query.removeOrFieldValue(field, value) : this.props.query.addOrFieldValue(field, value);\n\n          this.props.onChange(_query);\n        } else {\n          var _query2 = checked ? this.props.query.removeSimpleFieldValue(field, value) : this.props.query.addSimpleFieldValue(field, value);\n\n          this.props.onChange(_query2);\n        }\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(index, event) {\n      switch (event.keyCode) {\n        case keyCodes.DOWN:\n          if (index < this.selectItems.length - 1) {\n            event.preventDefault();\n            this.selectItems[index + 1].focus();\n          }\n\n          break;\n\n        case keyCodes.UP:\n          if (index < 0) {\n            return; // it's coming from the search box... nothing to do... nowhere to go\n          }\n\n          if (index === 0 && this.searchInput) {\n            event.preventDefault();\n            this.searchInput.focus();\n          } else if (index > 0) {\n            event.preventDefault();\n            this.selectItems[index - 1].focus();\n          }\n\n      }\n    }\n  }, {\n    key: \"resolveMultiSelect\",\n    value: function resolveMultiSelect() {\n      var config = this.props.config;\n      return !isNil(config.multiSelect) ? config.multiSelect : defaults.config.multiSelect;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$props = this.props,\n          index = _this$props.index,\n          query = _this$props.query,\n          config = _this$props.config;\n      var multiSelect = this.resolveMultiSelect();\n      var activeTop = this.isActiveField(config.field);\n      var activeItem = this.state.options ? this.state.options.all.some(function (item) {\n        return _this6.isActiveField(item.field);\n      }) : false;\n      var active = activeTop || activeItem;\n      var button = React.createElement(EuiFilterButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: this.onButtonClick.bind(this),\n        hasActiveFilters: active,\n        grow: true\n      }, config.name);\n      var searchBox = this.renderSearchBox();\n      var content = this.renderContent(config.field, query, config, multiSelect);\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n      var withTitle = this.state.options && this.state.options.all.length >= threshold;\n      return React.createElement(EuiPopover, {\n        id: \"\".concat(config.type, \"_\").concat(index),\n        ownFocus: true,\n        button: button,\n        isOpen: this.state.popoverOpen,\n        closePopover: this.closePopover.bind(this),\n        panelPaddingSize: \"none\",\n        withTitle: withTitle,\n        anchorPosition: \"downCenter\",\n        panelClassName: \"euiFilterGroup__popoverPanel\"\n      }, searchBox, content);\n    }\n  }, {\n    key: \"renderSearchBox\",\n    value: function renderSearchBox() {\n      var _this7 = this;\n\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n\n      if (this.state.options && this.state.options.all.length >= threshold) {\n        var disabled = this.state.error;\n        return React.createElement(EuiPopoverTitle, null, React.createElement(EuiFieldSearch, {\n          inputRef: function inputRef(ref) {\n            return _this7.searchInput = ref;\n          },\n          disabled: disabled,\n          incremental: true,\n          onSearch: function onSearch(query) {\n            return _this7.filterOptions(query);\n          },\n          onKeyDown: this.onKeyDown.bind(this, -1)\n        }));\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(field, query, config, multiSelect) {\n      var _this8 = this;\n\n      if (this.state.error) {\n        return this.renderError(this.state.error);\n      }\n\n      if (isNil(this.state.options)) {\n        return this.renderLoader();\n      }\n\n      if (this.state.options.shown.length === 0) {\n        return this.renderNoOptions();\n      }\n\n      var items = this.state.options.shown.reduce(function (items, option, index) {\n        var optionField = option.field || field;\n        var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, option.value) : query.getSimpleFieldClause(optionField, option.value);\n\n        var checked = _this8.resolveChecked(clause);\n\n        var onClick = function onClick() {\n          // clicking a checked item will uncheck it and effective remove the filter (value = undefined)\n          _this8.onOptionClick(optionField, option.value, checked);\n        };\n\n        var item = React.createElement(EuiFilterSelectItem, {\n          key: index,\n          checked: checked,\n          onClick: onClick,\n          ref: function ref(_ref) {\n            return _this8.selectItems[index] = _ref;\n          },\n          onKeyDown: _this8.onKeyDown.bind(_this8, index)\n        }, option.view ? option.view : _this8.resolveOptionName(option));\n\n        if (!checked) {\n          items.rest.push(item);\n        } else if (checked === 'on') {\n          items.on.push(item);\n        } else {\n          items.off.push(item);\n        }\n\n        return items;\n      }, {\n        on: [],\n        off: [],\n        rest: []\n      });\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__items\"\n      }, [].concat(_toConsumableArray(items.on), _toConsumableArray(items.off), _toConsumableArray(items.rest)));\n    }\n  }, {\n    key: \"resolveChecked\",\n    value: function resolveChecked(clause) {\n      if (clause) {\n        return Query.isMust(clause) ? 'on' : 'off';\n      }\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      var message = this.props.config.loadingMessage || defaults.config.loadingMessage;\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiLoadingChart, {\n        size: \"m\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError(message) {\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiIcon, {\n        size: \"m\",\n        type: \"faceSad\",\n        color: \"danger\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderNoOptions\",\n    value: function renderNoOptions() {\n      var message = this.props.config.noOptionsMessage || defaults.config.noOptionsMessage;\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiIcon, {\n        type: \"minusInCircle\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"isActiveField\",\n    value: function isActiveField(field) {\n      if (typeof field !== 'string') {\n        return false;\n      }\n\n      var query = this.props.query;\n      var multiSelect = this.resolveMultiSelect();\n\n      if (multiSelect === 'or') {\n        return query.hasOrFieldClause(field);\n      }\n\n      return query.hasSimpleFieldClause(field);\n    }\n  }]);\n\n  return FieldValueSelectionFilter;\n}(Component);\n\n_defineProperty(FieldValueSelectionFilter, \"propTypes\", FieldValueSelectionFilterPropTypes);\n\n_defineProperty(FieldValueSelectionFilter, \"defaultProps\", {\n  autoClose: true\n});\n\nFieldValueSelectionFilter.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"closePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"onButtonClick\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"loadOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"filterOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"q\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"getOptionFilter\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveOptionsLoader\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveOptionName\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"option\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onOptionClick\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }, {\n      \"name\": \"value\",\n      \"type\": null\n    }, {\n      \"name\": \"checked\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onKeyDown\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"index\",\n      \"type\": null\n    }, {\n      \"name\": \"event\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveMultiSelect\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderSearchBox\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderContent\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }, {\n      \"name\": \"query\",\n      \"type\": null\n    }, {\n      \"name\": \"config\",\n      \"type\": null\n    }, {\n      \"name\": \"multiSelect\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveChecked\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"clause\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderLoader\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderError\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"message\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderNoOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"isActiveField\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"FieldValueSelectionFilter\",\n  \"props\": {\n    \"autoClose\": {\n      \"defaultValue\": {\n        \"value\": \"true\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"index\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"config\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"FieldValueSelectionFilterConfigType.isRequired\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"query\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"onChange\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};","map":{"version":3,"sources":["/home/ad.rapidops.com/jaymin.shah/project/demostruct/node_modules/@elastic/eui/es/components/search_bar/filters/field_value_selection_filter.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Object","toString","call","Array","from","isArray","i","arr2","length","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","React","Component","PropTypes","isNil","keyCodes","EuiPropTypes","EuiPopover","EuiPopoverTitle","EuiFieldSearch","EuiFilterSelectItem","EuiFilterButton","EuiLoadingChart","EuiSpacer","EuiIcon","Query","FieldValueOptionType","shape","field","string","any","isRequired","name","view","node","FieldValueOptionsType","oneOfType","func","arrayOf","FieldValueSelectionFilterConfigType","type","is","autoClose","boolean","options","filterWith","oneOf","cache","number","multiSelect","bool","loadingMessage","noOptionsMessage","searchThreshold","available","FieldValueSelectionFilterPropTypes","index","config","query","onChange","defaults","FieldValueSelectionFilter","_Component","_this","preloadedOptions","all","shown","selectItems","state","popoverOpen","error","closePopover","setState","onButtonClick","_this2","prevState","window","requestAnimationFrame","loadOptions","_this3","loader","resolveOptionsLoader","then","catch","filterOptions","_this4","q","undefined","predicate","getOptionFilter","option","resolveOptionName","toLowerCase","includes","startsWith","_this5","Promise","resolve","cachedOptions","reject","opts","timeoutId","setTimeout","onOptionClick","checked","resolveMultiSelect","removeSimpleFieldClauses","addSimpleFieldValue","_query","removeOrFieldValue","addOrFieldValue","_query2","removeSimpleFieldValue","onKeyDown","event","keyCode","DOWN","preventDefault","focus","UP","searchInput","render","_this6","_this$props","activeTop","isActiveField","activeItem","some","item","active","button","createElement","iconType","iconSide","onClick","bind","hasActiveFilters","grow","searchBox","renderSearchBox","content","renderContent","threshold","withTitle","id","concat","ownFocus","isOpen","panelPaddingSize","anchorPosition","panelClassName","_this7","disabled","inputRef","ref","incremental","onSearch","_this8","renderError","renderLoader","renderNoOptions","items","reduce","optionField","clause","getOrFieldClause","getSimpleFieldClause","resolveChecked","_ref","rest","on","off","className","isMust","message","size","color","hasOrFieldClause","hasSimpleFieldClause","__docgenInfo"],"mappings":"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","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { isArray, isNil } from '../../../services/predicate';\nimport { keyCodes } from '../../../services';\nimport { EuiPropTypes } from '../../../utils/prop_types';\nimport { EuiPopover } from '../../popover/popover';\nimport { EuiPopoverTitle } from '../../popover/popover_title';\nimport { EuiFieldSearch } from '../../form/field_search/field_search';\nimport { EuiFilterSelectItem, EuiFilterButton } from '../../filter_group';\nimport { EuiLoadingChart } from '../../loading/loading_chart';\nimport { EuiSpacer } from '../../spacer/spacer';\nimport { EuiIcon } from '../../icon/icon';\nimport { Query } from '../query';\nvar FieldValueOptionType = PropTypes.shape({\n  field: PropTypes.string,\n  value: PropTypes.any.isRequired,\n  name: PropTypes.string,\n  view: PropTypes.node\n});\nvar FieldValueOptionsType = PropTypes.oneOfType([PropTypes.func, // (query) => Promise<FieldValueOptionType[]>\nPropTypes.arrayOf(FieldValueOptionType)]);\nexport var FieldValueSelectionFilterConfigType = PropTypes.shape({\n  type: EuiPropTypes.is('field_value_selection').isRequired,\n  field: PropTypes.string,\n  autoClose: PropTypes.boolean,\n  name: PropTypes.string.isRequired,\n  options: FieldValueOptionsType.isRequired,\n  filterWith: PropTypes.oneOfType([PropTypes.func, PropTypes.oneOf(['prefix', 'includes'])]),\n  cache: PropTypes.number,\n  multiSelect: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['and', 'or'])]),\n  loadingMessage: PropTypes.string,\n  noOptionsMessage: PropTypes.string,\n  searchThreshold: PropTypes.number,\n  available: PropTypes.func // () => boolean\n\n});\nvar FieldValueSelectionFilterPropTypes = {\n  index: PropTypes.number.isRequired,\n  config: FieldValueSelectionFilterConfigType.isRequired,\n  query: PropTypes.any.isRequired,\n  onChange: PropTypes.func.isRequired // (value) => void\n\n};\nvar defaults = {\n  config: {\n    multiSelect: true,\n    filterWith: 'prefix',\n    loadingMessage: 'Loading...',\n    noOptionsMessage: 'No options found',\n    searchThreshold: 10\n  }\n};\nexport var FieldValueSelectionFilter =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FieldValueSelectionFilter, _Component);\n\n  function FieldValueSelectionFilter(props) {\n    var _this;\n\n    _classCallCheck(this, FieldValueSelectionFilter);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FieldValueSelectionFilter).call(this, props));\n    var options = props.config.options;\n    var preloadedOptions = isArray(options) ? {\n      all: options,\n      shown: options\n    } : null;\n    _this.selectItems = [];\n    _this.state = {\n      popoverOpen: false,\n      error: null,\n      options: preloadedOptions\n    };\n    return _this;\n  }\n\n  _createClass(FieldValueSelectionFilter, [{\n    key: \"closePopover\",\n    value: function closePopover() {\n      this.setState({\n        popoverOpen: false\n      });\n    }\n  }, {\n    key: \"onButtonClick\",\n    value: function onButtonClick() {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        if (!prevState.popoverOpen) {\n          // loading options updates the state, so we'll do that in the animation frame\n          window.requestAnimationFrame(function () {\n            _this2.loadOptions();\n          });\n        }\n\n        return {\n          options: null,\n          error: null,\n          popoverOpen: !prevState.popoverOpen\n        };\n      });\n    }\n  }, {\n    key: \"loadOptions\",\n    value: function loadOptions() {\n      var _this3 = this;\n\n      var loader = this.resolveOptionsLoader();\n      this.setState({\n        options: null,\n        error: null\n      });\n      loader().then(function (options) {\n        _this3.setState({\n          error: null,\n          options: {\n            all: options,\n            shown: options\n          }\n        });\n      }).catch(function () {\n        _this3.setState({\n          options: null,\n          error: 'Could not load options'\n        });\n      });\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions() {\n      var _this4 = this;\n\n      var q = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.setState(function (prevState) {\n        if (isNil(prevState.options)) {\n          return {};\n        }\n\n        var predicate = _this4.getOptionFilter();\n\n        return {\n          options: _objectSpread({}, prevState.options, {\n            shown: prevState.options.all.filter(function (option, i, options) {\n              var name = _this4.resolveOptionName(option).toLowerCase();\n\n              var query = q.toLowerCase();\n              return predicate(name, query, options);\n            })\n          })\n        };\n      });\n    }\n  }, {\n    key: \"getOptionFilter\",\n    value: function getOptionFilter() {\n      var filterWith = this.props.config.filterWith || defaults.config.filterWith;\n\n      if (typeof filterWith === 'function') {\n        return filterWith;\n      }\n\n      if (filterWith === 'includes') {\n        return function (name, query) {\n          return name.includes(query);\n        };\n      }\n\n      return function (name, query) {\n        return name.startsWith(query);\n      };\n    }\n  }, {\n    key: \"resolveOptionsLoader\",\n    value: function resolveOptionsLoader() {\n      var _this5 = this;\n\n      var options = this.props.config.options;\n\n      if (isArray(options)) {\n        return function () {\n          return Promise.resolve(options);\n        };\n      }\n\n      if (isNil(this.props.config.cache) || this.props.config.cache <= 0) {\n        return options;\n      }\n\n      return function () {\n        var cachedOptions = _this5.state.cachedOptions;\n\n        if (cachedOptions) {\n          return Promise.resolve(cachedOptions);\n        }\n\n        if (_this5.props.config.cache > 0) {\n          return new Promise(function (resolve, reject) {\n            return options().then(function (opts) {\n              _this5.setState({\n                cachedOptions: opts\n              });\n\n              _this5.timeoutId = setTimeout(function () {\n                _this5.setState({\n                  cachedOptions: null\n                });\n              }, _this5.props.config.cache);\n              resolve(opts);\n            }).catch(function (error) {\n              reject(error);\n            });\n          });\n        }\n      };\n    }\n  }, {\n    key: \"resolveOptionName\",\n    value: function resolveOptionName(option) {\n      return option.name || option.value.toString();\n    }\n  }, {\n    key: \"onOptionClick\",\n    value: function onOptionClick(field, value, checked) {\n      var multiSelect = this.resolveMultiSelect();\n      var autoClose = this.props.autoClose; // we're closing popover only if the user can only select one item... if the\n      // user can select more, we'll leave it open so she can continue selecting\n\n      if (!multiSelect && autoClose) {\n        this.closePopover();\n        var query = checked ? this.props.query.removeSimpleFieldClauses(field) : this.props.query.removeSimpleFieldClauses(field).addSimpleFieldValue(field, value);\n        this.props.onChange(query);\n      } else {\n        if (multiSelect === 'or') {\n          var _query = checked ? this.props.query.removeOrFieldValue(field, value) : this.props.query.addOrFieldValue(field, value);\n\n          this.props.onChange(_query);\n        } else {\n          var _query2 = checked ? this.props.query.removeSimpleFieldValue(field, value) : this.props.query.addSimpleFieldValue(field, value);\n\n          this.props.onChange(_query2);\n        }\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(index, event) {\n      switch (event.keyCode) {\n        case keyCodes.DOWN:\n          if (index < this.selectItems.length - 1) {\n            event.preventDefault();\n            this.selectItems[index + 1].focus();\n          }\n\n          break;\n\n        case keyCodes.UP:\n          if (index < 0) {\n            return; // it's coming from the search box... nothing to do... nowhere to go\n          }\n\n          if (index === 0 && this.searchInput) {\n            event.preventDefault();\n            this.searchInput.focus();\n          } else if (index > 0) {\n            event.preventDefault();\n            this.selectItems[index - 1].focus();\n          }\n\n      }\n    }\n  }, {\n    key: \"resolveMultiSelect\",\n    value: function resolveMultiSelect() {\n      var config = this.props.config;\n      return !isNil(config.multiSelect) ? config.multiSelect : defaults.config.multiSelect;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$props = this.props,\n          index = _this$props.index,\n          query = _this$props.query,\n          config = _this$props.config;\n      var multiSelect = this.resolveMultiSelect();\n      var activeTop = this.isActiveField(config.field);\n      var activeItem = this.state.options ? this.state.options.all.some(function (item) {\n        return _this6.isActiveField(item.field);\n      }) : false;\n      var active = activeTop || activeItem;\n      var button = React.createElement(EuiFilterButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: this.onButtonClick.bind(this),\n        hasActiveFilters: active,\n        grow: true\n      }, config.name);\n      var searchBox = this.renderSearchBox();\n      var content = this.renderContent(config.field, query, config, multiSelect);\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n      var withTitle = this.state.options && this.state.options.all.length >= threshold;\n      return React.createElement(EuiPopover, {\n        id: \"\".concat(config.type, \"_\").concat(index),\n        ownFocus: true,\n        button: button,\n        isOpen: this.state.popoverOpen,\n        closePopover: this.closePopover.bind(this),\n        panelPaddingSize: \"none\",\n        withTitle: withTitle,\n        anchorPosition: \"downCenter\",\n        panelClassName: \"euiFilterGroup__popoverPanel\"\n      }, searchBox, content);\n    }\n  }, {\n    key: \"renderSearchBox\",\n    value: function renderSearchBox() {\n      var _this7 = this;\n\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n\n      if (this.state.options && this.state.options.all.length >= threshold) {\n        var disabled = this.state.error;\n        return React.createElement(EuiPopoverTitle, null, React.createElement(EuiFieldSearch, {\n          inputRef: function inputRef(ref) {\n            return _this7.searchInput = ref;\n          },\n          disabled: disabled,\n          incremental: true,\n          onSearch: function onSearch(query) {\n            return _this7.filterOptions(query);\n          },\n          onKeyDown: this.onKeyDown.bind(this, -1)\n        }));\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(field, query, config, multiSelect) {\n      var _this8 = this;\n\n      if (this.state.error) {\n        return this.renderError(this.state.error);\n      }\n\n      if (isNil(this.state.options)) {\n        return this.renderLoader();\n      }\n\n      if (this.state.options.shown.length === 0) {\n        return this.renderNoOptions();\n      }\n\n      var items = this.state.options.shown.reduce(function (items, option, index) {\n        var optionField = option.field || field;\n        var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, option.value) : query.getSimpleFieldClause(optionField, option.value);\n\n        var checked = _this8.resolveChecked(clause);\n\n        var onClick = function onClick() {\n          // clicking a checked item will uncheck it and effective remove the filter (value = undefined)\n          _this8.onOptionClick(optionField, option.value, checked);\n        };\n\n        var item = React.createElement(EuiFilterSelectItem, {\n          key: index,\n          checked: checked,\n          onClick: onClick,\n          ref: function ref(_ref) {\n            return _this8.selectItems[index] = _ref;\n          },\n          onKeyDown: _this8.onKeyDown.bind(_this8, index)\n        }, option.view ? option.view : _this8.resolveOptionName(option));\n\n        if (!checked) {\n          items.rest.push(item);\n        } else if (checked === 'on') {\n          items.on.push(item);\n        } else {\n          items.off.push(item);\n        }\n\n        return items;\n      }, {\n        on: [],\n        off: [],\n        rest: []\n      });\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__items\"\n      }, [].concat(_toConsumableArray(items.on), _toConsumableArray(items.off), _toConsumableArray(items.rest)));\n    }\n  }, {\n    key: \"resolveChecked\",\n    value: function resolveChecked(clause) {\n      if (clause) {\n        return Query.isMust(clause) ? 'on' : 'off';\n      }\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      var message = this.props.config.loadingMessage || defaults.config.loadingMessage;\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiLoadingChart, {\n        size: \"m\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError(message) {\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiIcon, {\n        size: \"m\",\n        type: \"faceSad\",\n        color: \"danger\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderNoOptions\",\n    value: function renderNoOptions() {\n      var message = this.props.config.noOptionsMessage || defaults.config.noOptionsMessage;\n      return React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, React.createElement(EuiIcon, {\n        type: \"minusInCircle\"\n      }), React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"isActiveField\",\n    value: function isActiveField(field) {\n      if (typeof field !== 'string') {\n        return false;\n      }\n\n      var query = this.props.query;\n      var multiSelect = this.resolveMultiSelect();\n\n      if (multiSelect === 'or') {\n        return query.hasOrFieldClause(field);\n      }\n\n      return query.hasSimpleFieldClause(field);\n    }\n  }]);\n\n  return FieldValueSelectionFilter;\n}(Component);\n\n_defineProperty(FieldValueSelectionFilter, \"propTypes\", FieldValueSelectionFilterPropTypes);\n\n_defineProperty(FieldValueSelectionFilter, \"defaultProps\", {\n  autoClose: true\n});\n\nFieldValueSelectionFilter.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"closePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"onButtonClick\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"loadOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"filterOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"q\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"getOptionFilter\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveOptionsLoader\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveOptionName\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"option\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onOptionClick\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }, {\n      \"name\": \"value\",\n      \"type\": null\n    }, {\n      \"name\": \"checked\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onKeyDown\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"index\",\n      \"type\": null\n    }, {\n      \"name\": \"event\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveMultiSelect\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderSearchBox\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderContent\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }, {\n      \"name\": \"query\",\n      \"type\": null\n    }, {\n      \"name\": \"config\",\n      \"type\": null\n    }, {\n      \"name\": \"multiSelect\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"resolveChecked\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"clause\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderLoader\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderError\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"message\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderNoOptions\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"isActiveField\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"field\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"FieldValueSelectionFilter\",\n  \"props\": {\n    \"autoClose\": {\n      \"defaultValue\": {\n        \"value\": \"true\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"index\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"config\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"FieldValueSelectionFilterConfigType.isRequired\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"query\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"onChange\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}