{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { EuiPopover, EuiPopoverFooter } from '../popover';\nimport { EuiI18n } from '../i18n';\nimport { EuiText } from '../text';\nimport { EuiButtonEmpty } from '../button';\nimport { EuiFlexGroup, EuiFlexItem } from '../flex';\nimport { EuiDragDropContext, EuiDroppable, euiDragDropReorder } from '../drag_and_drop';\nimport { EuiDataGridColumnSortingDraggable } from './column_sorting_draggable';\nimport { getDetailsForSchema } from './data_grid_schema';\nimport { EuiToken } from '../token';\nexport var useColumnSorting = function useColumnSorting(columns, sorting, schema, schemaDetectors) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      avilableColumnsisOpen = _useState4[0],\n      setAvailableColumnsIsOpen = _useState4[1]; // prune any non-existant/hidden columns from sorting\n\n\n  useEffect(function () {\n    if (sorting) {\n      var nextSortingColumns = [];\n      var availableColumnIds = new Set(columns.map(function (_ref) {\n        var id = _ref.id;\n        return id;\n      }));\n\n      for (var i = 0; i < sorting.columns.length; i++) {\n        var column = sorting.columns[i];\n\n        if (availableColumnIds.has(column.id)) {\n          nextSortingColumns.push(column);\n        }\n      } // if the column array lengths differ then the sorting columns have been pruned\n\n\n      if (nextSortingColumns.length !== sorting.columns.length) {\n        sorting.onSort(nextSortingColumns);\n      }\n    }\n  }, [columns, sorting]);\n  if (sorting == null) return [null];\n  var activeColumnIds = new Set(sorting.columns.map(function (_ref2) {\n    var id = _ref2.id;\n    return id;\n  }));\n\n  var _columns$reduce = columns.reduce(function (acc, column) {\n    if (activeColumnIds.has(column.id)) {\n      acc.activeColumns.push(column);\n    } else {\n      acc.inactiveColumns.push(column);\n    }\n\n    return acc;\n  }, {\n    activeColumns: [],\n    inactiveColumns: []\n  }),\n      inactiveColumns = _columns$reduce.inactiveColumns;\n\n  function onDragEnd(_ref3) {\n    var sourceIndex = _ref3.source.index,\n        destination = _ref3.destination;\n    var destinationIndex = destination.index;\n    var nextColumns = euiDragDropReorder(sorting.columns, sourceIndex, destinationIndex);\n    sorting.onSort(nextColumns);\n  }\n\n  var controlBtnClasses = classNames('euiDataGrid__controlBtn', {\n    'euiDataGrid__controlBtn--active': sorting.columns.length > 0\n  });\n  var numberOfSortedFields = sorting.columns.length;\n  var columnSorting = React.createElement(EuiPopover, {\n    \"data-test-subj\": \"dataGridColumnSortingPopover\",\n    isOpen: isOpen,\n    closePopover: function closePopover() {\n      return setIsOpen(false);\n    },\n    anchorPosition: \"downLeft\",\n    ownFocus: true,\n    panelPaddingSize: \"s\",\n    panelClassName: \"euiDataGridColumnSortingPopover\",\n    button: React.createElement(EuiI18n, {\n      tokens: ['euiColumnSorting.button', 'euiColumnSorting.buttonActive'],\n      defaults: ['Sort fields', 'fields sorted']\n    }, function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          button = _ref5[0],\n          buttonActive = _ref5[1];\n\n      return React.createElement(EuiButtonEmpty, {\n        size: \"xs\",\n        iconType: \"sortable\",\n        color: \"text\",\n        className: controlBtnClasses,\n        \"data-test-subj\": \"dataGridColumnSortingButton\",\n        onClick: function onClick() {\n          return setIsOpen(!isOpen);\n        }\n      }, numberOfSortedFields > 0 ? \"\".concat(numberOfSortedFields, \" \").concat(buttonActive) : button);\n    })\n  }, sorting.columns.length > 0 ? React.createElement(\"div\", {\n    role: \"region\",\n    \"aria-live\": \"assertive\"\n  }, React.createElement(EuiDragDropContext, {\n    onDragEnd: onDragEnd\n  }, React.createElement(EuiDroppable, {\n    droppableId: \"columnSorting\",\n    className: \"euiDataGridColumnSorting\"\n  }, React.createElement(Fragment, null, sorting.columns.map(function (_ref6, index) {\n    var id = _ref6.id,\n        direction = _ref6.direction;\n    return React.createElement(EuiDataGridColumnSortingDraggable, {\n      key: id,\n      id: id,\n      direction: direction,\n      index: index,\n      sorting: sorting,\n      schema: schema,\n      schemaDetectors: schemaDetectors\n    });\n  }))))) : React.createElement(EuiText, {\n    size: \"s\",\n    color: \"subdued\"\n  }, React.createElement(\"p\", {\n    role: \"alert\"\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.emptySorting\",\n    default: \"Currently no fields are sorted\"\n  }))), (inactiveColumns.length > 0 || sorting.columns.length > 0) && React.createElement(EuiPopoverFooter, null, React.createElement(EuiFlexGroup, {\n    gutterSize: \"m\",\n    justifyContent: \"spaceBetween\",\n    responsive: false\n  }, React.createElement(EuiFlexItem, {\n    grow: false\n  }, inactiveColumns.length > 0 && React.createElement(EuiPopover, {\n    \"data-test-subj\": \"dataGridColumnSortingPopoverColumnSelection\",\n    isOpen: avilableColumnsisOpen,\n    closePopover: function closePopover() {\n      return setAvailableColumnsIsOpen(false);\n    },\n    anchorPosition: \"downLeft\",\n    ownFocus: true,\n    panelPaddingSize: \"s\",\n    button: React.createElement(EuiButtonEmpty, {\n      size: \"xs\",\n      flush: \"left\",\n      iconType: \"arrowDown\",\n      iconSide: \"right\",\n      onClick: function onClick() {\n        return setAvailableColumnsIsOpen(!avilableColumnsisOpen);\n      }\n    }, React.createElement(EuiI18n, {\n      token: \"euiColumnSorting.pickFields\",\n      default: \"Pick fields to sort by\"\n    }))\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.sortFieldAriaLabel\",\n    default: \"Sort by: \"\n  }, function (sortFieldAriaLabel) {\n    return React.createElement(\"div\", {\n      className: \"euiDataGridColumnSorting__fieldList\",\n      role: \"listbox\"\n    }, inactiveColumns.map(function (_ref7) {\n      var id = _ref7.id;\n      return React.createElement(\"button\", {\n        key: id,\n        className: \"euiDataGridColumnSorting__field\",\n        \"aria-label\": \"\".concat(sortFieldAriaLabel, \" \").concat(id),\n        role: \"option\",\n        \"aria-selected\": \"false\",\n        \"data-test-subj\": \"dataGridColumnSortingPopoverColumnSelection-\".concat(id),\n        onClick: function onClick() {\n          var nextColumns = _toConsumableArray(sorting.columns);\n\n          nextColumns.push({\n            id: id,\n            direction: 'asc'\n          });\n          sorting.onSort(nextColumns);\n        }\n      }, React.createElement(EuiFlexGroup, {\n        alignItems: \"center\",\n        gutterSize: \"s\",\n        component: \"span\"\n      }, React.createElement(EuiFlexItem, {\n        grow: false\n      }, React.createElement(EuiToken, {\n        iconType: schema.hasOwnProperty(id) && schema[id].columnType != null ? getDetailsForSchema(schemaDetectors, schema[id].columnType).icon : 'tokenString',\n        color: schema.hasOwnProperty(id) && schema[id].columnType != null ? getDetailsForSchema(schemaDetectors, schema[id].columnType).color : undefined\n      })), React.createElement(EuiFlexItem, {\n        grow: false\n      }, React.createElement(EuiText, {\n        size: \"xs\"\n      }, React.createElement(\"span\", null, id)))));\n    }));\n  }))), sorting.columns.length > 0 ? React.createElement(EuiFlexItem, {\n    grow: false\n  }, React.createElement(EuiButtonEmpty, {\n    size: \"xs\",\n    flush: \"right\",\n    onClick: function onClick() {\n      return sorting.onSort([]);\n    }\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.clearAll\",\n    default: \"Clear sorting\"\n  }))) : null)));\n  return columnSorting;\n};","map":{"version":3,"sources":["/home/ad.rapidops.com/jaymin.shah/project/demostruct/node_modules/@elastic/eui/es/components/datagrid/column_sorting.js"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","React","Fragment","useState","useEffect","classNames","EuiPopover","EuiPopoverFooter","EuiI18n","EuiText","EuiButtonEmpty","EuiFlexGroup","EuiFlexItem","EuiDragDropContext","EuiDroppable","euiDragDropReorder","EuiDataGridColumnSortingDraggable","getDetailsForSchema","EuiToken","useColumnSorting","columns","sorting","schema","schemaDetectors","_useState","_useState2","isOpen","setIsOpen","_useState3","_useState4","avilableColumnsisOpen","setAvailableColumnsIsOpen","nextSortingColumns","availableColumnIds","Set","map","_ref","id","column","has","onSort","activeColumnIds","_ref2","_columns$reduce","reduce","acc","activeColumns","inactiveColumns","onDragEnd","_ref3","sourceIndex","source","index","destination","destinationIndex","nextColumns","controlBtnClasses","numberOfSortedFields","columnSorting","createElement","closePopover","anchorPosition","ownFocus","panelPaddingSize","panelClassName","button","tokens","defaults","_ref4","_ref5","buttonActive","size","iconType","color","className","onClick","concat","role","droppableId","_ref6","direction","key","token","default","gutterSize","justifyContent","responsive","grow","flush","iconSide","sortFieldAriaLabel","_ref7","alignItems","component","hasOwnProperty","columnType","icon"],"mappings":"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","sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { EuiPopover, EuiPopoverFooter } from '../popover';\nimport { EuiI18n } from '../i18n';\nimport { EuiText } from '../text';\nimport { EuiButtonEmpty } from '../button';\nimport { EuiFlexGroup, EuiFlexItem } from '../flex';\nimport { EuiDragDropContext, EuiDroppable, euiDragDropReorder } from '../drag_and_drop';\nimport { EuiDataGridColumnSortingDraggable } from './column_sorting_draggable';\nimport { getDetailsForSchema } from './data_grid_schema';\nimport { EuiToken } from '../token';\nexport var useColumnSorting = function useColumnSorting(columns, sorting, schema, schemaDetectors) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      avilableColumnsisOpen = _useState4[0],\n      setAvailableColumnsIsOpen = _useState4[1]; // prune any non-existant/hidden columns from sorting\n\n\n  useEffect(function () {\n    if (sorting) {\n      var nextSortingColumns = [];\n      var availableColumnIds = new Set(columns.map(function (_ref) {\n        var id = _ref.id;\n        return id;\n      }));\n\n      for (var i = 0; i < sorting.columns.length; i++) {\n        var column = sorting.columns[i];\n\n        if (availableColumnIds.has(column.id)) {\n          nextSortingColumns.push(column);\n        }\n      } // if the column array lengths differ then the sorting columns have been pruned\n\n\n      if (nextSortingColumns.length !== sorting.columns.length) {\n        sorting.onSort(nextSortingColumns);\n      }\n    }\n  }, [columns, sorting]);\n  if (sorting == null) return [null];\n  var activeColumnIds = new Set(sorting.columns.map(function (_ref2) {\n    var id = _ref2.id;\n    return id;\n  }));\n\n  var _columns$reduce = columns.reduce(function (acc, column) {\n    if (activeColumnIds.has(column.id)) {\n      acc.activeColumns.push(column);\n    } else {\n      acc.inactiveColumns.push(column);\n    }\n\n    return acc;\n  }, {\n    activeColumns: [],\n    inactiveColumns: []\n  }),\n      inactiveColumns = _columns$reduce.inactiveColumns;\n\n  function onDragEnd(_ref3) {\n    var sourceIndex = _ref3.source.index,\n        destination = _ref3.destination;\n    var destinationIndex = destination.index;\n    var nextColumns = euiDragDropReorder(sorting.columns, sourceIndex, destinationIndex);\n    sorting.onSort(nextColumns);\n  }\n\n  var controlBtnClasses = classNames('euiDataGrid__controlBtn', {\n    'euiDataGrid__controlBtn--active': sorting.columns.length > 0\n  });\n  var numberOfSortedFields = sorting.columns.length;\n  var columnSorting = React.createElement(EuiPopover, {\n    \"data-test-subj\": \"dataGridColumnSortingPopover\",\n    isOpen: isOpen,\n    closePopover: function closePopover() {\n      return setIsOpen(false);\n    },\n    anchorPosition: \"downLeft\",\n    ownFocus: true,\n    panelPaddingSize: \"s\",\n    panelClassName: \"euiDataGridColumnSortingPopover\",\n    button: React.createElement(EuiI18n, {\n      tokens: ['euiColumnSorting.button', 'euiColumnSorting.buttonActive'],\n      defaults: ['Sort fields', 'fields sorted']\n    }, function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          button = _ref5[0],\n          buttonActive = _ref5[1];\n\n      return React.createElement(EuiButtonEmpty, {\n        size: \"xs\",\n        iconType: \"sortable\",\n        color: \"text\",\n        className: controlBtnClasses,\n        \"data-test-subj\": \"dataGridColumnSortingButton\",\n        onClick: function onClick() {\n          return setIsOpen(!isOpen);\n        }\n      }, numberOfSortedFields > 0 ? \"\".concat(numberOfSortedFields, \" \").concat(buttonActive) : button);\n    })\n  }, sorting.columns.length > 0 ? React.createElement(\"div\", {\n    role: \"region\",\n    \"aria-live\": \"assertive\"\n  }, React.createElement(EuiDragDropContext, {\n    onDragEnd: onDragEnd\n  }, React.createElement(EuiDroppable, {\n    droppableId: \"columnSorting\",\n    className: \"euiDataGridColumnSorting\"\n  }, React.createElement(Fragment, null, sorting.columns.map(function (_ref6, index) {\n    var id = _ref6.id,\n        direction = _ref6.direction;\n    return React.createElement(EuiDataGridColumnSortingDraggable, {\n      key: id,\n      id: id,\n      direction: direction,\n      index: index,\n      sorting: sorting,\n      schema: schema,\n      schemaDetectors: schemaDetectors\n    });\n  }))))) : React.createElement(EuiText, {\n    size: \"s\",\n    color: \"subdued\"\n  }, React.createElement(\"p\", {\n    role: \"alert\"\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.emptySorting\",\n    default: \"Currently no fields are sorted\"\n  }))), (inactiveColumns.length > 0 || sorting.columns.length > 0) && React.createElement(EuiPopoverFooter, null, React.createElement(EuiFlexGroup, {\n    gutterSize: \"m\",\n    justifyContent: \"spaceBetween\",\n    responsive: false\n  }, React.createElement(EuiFlexItem, {\n    grow: false\n  }, inactiveColumns.length > 0 && React.createElement(EuiPopover, {\n    \"data-test-subj\": \"dataGridColumnSortingPopoverColumnSelection\",\n    isOpen: avilableColumnsisOpen,\n    closePopover: function closePopover() {\n      return setAvailableColumnsIsOpen(false);\n    },\n    anchorPosition: \"downLeft\",\n    ownFocus: true,\n    panelPaddingSize: \"s\",\n    button: React.createElement(EuiButtonEmpty, {\n      size: \"xs\",\n      flush: \"left\",\n      iconType: \"arrowDown\",\n      iconSide: \"right\",\n      onClick: function onClick() {\n        return setAvailableColumnsIsOpen(!avilableColumnsisOpen);\n      }\n    }, React.createElement(EuiI18n, {\n      token: \"euiColumnSorting.pickFields\",\n      default: \"Pick fields to sort by\"\n    }))\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.sortFieldAriaLabel\",\n    default: \"Sort by: \"\n  }, function (sortFieldAriaLabel) {\n    return React.createElement(\"div\", {\n      className: \"euiDataGridColumnSorting__fieldList\",\n      role: \"listbox\"\n    }, inactiveColumns.map(function (_ref7) {\n      var id = _ref7.id;\n      return React.createElement(\"button\", {\n        key: id,\n        className: \"euiDataGridColumnSorting__field\",\n        \"aria-label\": \"\".concat(sortFieldAriaLabel, \" \").concat(id),\n        role: \"option\",\n        \"aria-selected\": \"false\",\n        \"data-test-subj\": \"dataGridColumnSortingPopoverColumnSelection-\".concat(id),\n        onClick: function onClick() {\n          var nextColumns = _toConsumableArray(sorting.columns);\n\n          nextColumns.push({\n            id: id,\n            direction: 'asc'\n          });\n          sorting.onSort(nextColumns);\n        }\n      }, React.createElement(EuiFlexGroup, {\n        alignItems: \"center\",\n        gutterSize: \"s\",\n        component: \"span\"\n      }, React.createElement(EuiFlexItem, {\n        grow: false\n      }, React.createElement(EuiToken, {\n        iconType: schema.hasOwnProperty(id) && schema[id].columnType != null ? getDetailsForSchema(schemaDetectors, schema[id].columnType).icon : 'tokenString',\n        color: schema.hasOwnProperty(id) && schema[id].columnType != null ? getDetailsForSchema(schemaDetectors, schema[id].columnType).color : undefined\n      })), React.createElement(EuiFlexItem, {\n        grow: false\n      }, React.createElement(EuiText, {\n        size: \"xs\"\n      }, React.createElement(\"span\", null, id)))));\n    }));\n  }))), sorting.columns.length > 0 ? React.createElement(EuiFlexItem, {\n    grow: false\n  }, React.createElement(EuiButtonEmpty, {\n    size: \"xs\",\n    flush: \"right\",\n    onClick: function onClick() {\n      return sorting.onSort([]);\n    }\n  }, React.createElement(EuiI18n, {\n    token: \"euiColumnSorting.clearAll\",\n    default: \"Clear sorting\"\n  }))) : null)));\n  return columnSorting;\n};"]},"metadata":{},"sourceType":"module"}